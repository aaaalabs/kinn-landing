<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KINN:RAUS - Use Case einreichen</title>
  <meta name="description" content="Reiche deinen KI Use Case ein für den KI Praxis Report Tirol 2026.">

  <!-- Typography: Work Sans -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Work Sans', system-ui, -apple-system, sans-serif;
      background: linear-gradient(180deg, #ffffff 0%, #fafcfb 100%);
      color: #3A3A3A;
      line-height: 1.618;
      font-weight: 400;
      min-height: 100vh;
      padding: 2rem;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(circle at 20% 30%, rgba(94,217,166,0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(94,217,166,0.05) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    /* ===== Demo Controls ===== */
    .demo-controls {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: rgba(0,0,0,0.85);
      color: #fff;
      padding: 1rem;
      border-radius: 0.75rem;
      font-size: 0.75rem;
      z-index: 1000;
      max-width: 280px;
    }

    .demo-controls h4 {
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #5ED9A6;
    }

    .demo-controls button {
      display: block;
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      background: #5ED9A6;
      border: none;
      border-radius: 0.375rem;
      color: #000;
      font-weight: 600;
      cursor: pointer;
      font-size: 0.75rem;
    }

    .demo-controls button:hover {
      background: #4EC995;
    }

    .demo-controls .step-info {
      margin-top: 0.75rem;
      padding-top: 0.75rem;
      border-top: 1px solid rgba(255,255,255,0.2);
      color: #999;
    }

    /* ===== Demo Entry Point ===== */
    .demo-entry {
      max-width: 640px;
      margin: 0 auto;
      padding: 3rem 0;
    }

    .demo-card {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      padding: 2rem;
      border: 1px solid rgba(0, 0, 0, 0.06);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
      text-align: center;
    }

    .demo-card h2 {
      font-size: 1.5rem;
      font-weight: 700;
      color: #2C3E50;
      margin-bottom: 0.75rem;
    }

    .demo-card p {
      color: #6B6B6B;
      margin-bottom: 1.5rem;
    }

    /* ===== Modal Overlay ===== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      z-index: 100;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .modal-overlay.active {
      display: flex;
    }

    /* ===== Modal Container ===== */
    .modal {
      background: #fff;
      border-radius: 1.25rem;
      width: 100%;
      max-width: 560px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 24px 48px rgba(0, 0, 0, 0.15);
      animation: modalIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes modalIn {
      from {
        opacity: 0;
        transform: scale(0.95) translateY(10px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #999;
      cursor: pointer;
      padding: 0.25rem;
      line-height: 1;
      border-radius: 0.25rem;
      transition: all 0.2s ease;
    }

    .modal-close:hover {
      background: rgba(0, 0, 0, 0.05);
      color: #333;
    }

    .modal-content {
      padding: 1.5rem;
    }

    /* ===== Typography (Dashboard-harmonized) ===== */
    h1 {
      font-size: 1.125rem;
      font-weight: 600;
      color: #2C3E50;
      margin-bottom: 0.5rem;
      line-height: 1.4;
    }

    .subtitle {
      font-size: 0.875rem;
      color: #6B6B6B;
      margin-bottom: 1.25rem;
      line-height: 1.5;
    }

    .step-indicator {
      font-size: 0.8125rem;
      color: #999;
      margin-bottom: 0.5rem;
    }

    /* ===== Tabler Icons ===== */
    .icon {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      fill: none;
      flex-shrink: 0;
    }

    .icon-lg {
      width: 48px;
      height: 48px;
    }

    .icon-xl {
      width: 64px;
      height: 64px;
    }

    /* ===== Pipeline Stats (Dashboard-Style) ===== */
    .pipeline-stats {
      background: rgba(255, 255, 255, 0.6);
      border-radius: 0.75rem;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid rgba(0, 0, 0, 0.04);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-size: 1.125rem;
      font-weight: 600;
      color: #2C3E50;
    }

    .stat-value.highlight {
      color: #5ED9A6;
    }

    .stat-label {
      font-size: 0.625rem;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      font-weight: 500;
    }

    .progress-bar {
      height: 4px;
      background: rgba(0, 0, 0, 0.08);
      border-radius: 2px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: #5ED9A6;
      border-radius: 2px;
      transition: width 0.5s ease;
    }

    .progress-text {
      font-size: 0.6875rem;
      color: #999;
      margin-top: 0.375rem;
      text-align: center;
    }

    /* ===== Deadline Banner (Subtle) ===== */
    .deadline-banner {
      background: rgba(251, 191, 36, 0.08);
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      margin-bottom: 1.25rem;
      display: flex;
      align-items: center;
      gap: 0.625rem;
    }

    .deadline-banner .icon {
      color: #d97706;
      flex-shrink: 0;
      width: 18px;
      height: 18px;
    }

    .deadline-text {
      font-size: 0.8125rem;
      line-height: 1.4;
    }

    .deadline-text strong {
      color: #92400e;
      font-weight: 600;
    }

    .deadline-text span {
      color: #b45309;
      font-weight: 400;
    }

    /* ===== Buttons ===== */
    .btn {
      font-family: 'Work Sans', sans-serif;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
      border-radius: 0.75rem;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      width: 100%;
    }

    .btn-primary {
      background: #5ED9A6;
      color: #000;
    }

    .btn-primary:hover {
      background: #4EC995;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(94, 217, 166, 0.3);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.8);
      color: #6B6B6B;
      border: 1px solid rgba(0, 0, 0, 0.12);
    }

    .btn-secondary:hover {
      background: #fff;
      color: #3A3A3A;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .btn-success {
      background: #059669;
      color: #fff;
    }

    .btn-success:hover {
      background: #047857;
    }

    .btn-text {
      background: none;
      color: #6B6B6B;
      padding: 0.5rem;
      width: auto;
    }

    .btn-text:hover {
      color: #3A3A3A;
    }

    .btn-row {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.5rem;
    }

    .btn-row .btn-text {
      flex-shrink: 0;
    }

    .btn-row .btn-primary,
    .btn-row .btn-success,
    .btn-row .btn-secondary {
      flex: 1;
    }

    /* Stack buttons when 3+ in row (mobile) */
    .btn-row.btn-row-stack {
      flex-direction: column;
      gap: 0.5rem;
    }

    .btn-row.btn-row-stack .btn {
      width: 100%;
    }

    .btn-row.btn-row-stack .btn-text {
      order: 3;
      margin-top: 0.5rem;
    }

    .hint-text {
      font-size: 0.8125rem;
      color: #999;
      text-align: center;
      margin-top: 1rem;
    }

    /* ===== Option Cards ===== */
    .option-card {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.8);
      border: 2px solid rgba(0, 0, 0, 0.08);
      border-radius: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 0.75rem;
      text-align: left;
      width: 100%;
    }

    .option-card:hover {
      border-color: #5ED9A6;
      background: rgba(94, 217, 166, 0.05);
    }

    .option-card.selected {
      border-color: #5ED9A6;
      background: rgba(94, 217, 166, 0.1);
    }

    .option-icon {
      color: #2C3E50;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .option-content {
      flex: 1;
    }

    .option-title {
      font-weight: 600;
      color: #2C3E50;
      margin-bottom: 0.25rem;
    }

    .option-desc {
      font-size: 0.8125rem;
      color: #6B6B6B;
    }

    /* ===== Exit Screens ===== */
    .exit-screen {
      text-align: center;
      padding: 1rem 0;
    }

    .exit-icon {
      color: #6B6B6B;
      margin-bottom: 1.5rem;
    }

    .exit-screen h2 {
      font-size: 1.125rem;
      font-weight: 600;
      color: #2C3E50;
      margin-bottom: 0.75rem;
    }

    .exit-screen p {
      color: #6B6B6B;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    /* ===== Form Elements ===== */
    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      color: #2C3E50;
      margin-bottom: 0.5rem;
    }

    .form-label .required {
      color: #dc2626;
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid rgba(0, 0, 0, 0.12);
      border-radius: 0.5rem;
      font-family: 'Work Sans', sans-serif;
      font-size: 0.9375rem;
      background: rgba(255, 255, 255, 0.8);
      transition: all 0.2s ease;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: #5ED9A6;
      box-shadow: 0 0 0 3px rgba(94, 217, 166, 0.15);
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-hint {
      font-size: 0.75rem;
      color: #999;
      margin-top: 0.25rem;
    }

    .char-count {
      font-size: 0.75rem;
      color: #999;
      text-align: right;
      margin-top: 0.25rem;
    }

    .char-count.warning {
      color: #d97706;
    }

    .char-count.error {
      color: #dc2626;
    }

    /* ===== Chips (Multi-Select) ===== */
    .chip-container {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      padding: 0.5rem 0.875rem;
      background: rgba(0, 0, 0, 0.04);
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 2rem;
      font-size: 0.8125rem;
      font-weight: 500;
      color: #3A3A3A;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
    }

    .chip:hover {
      background: rgba(94, 217, 166, 0.15);
      border-color: rgba(94, 217, 166, 0.3);
    }

    .chip.selected {
      background: #5ED9A6;
      border-color: #4EC995;
      color: #000;
      font-weight: 600;
    }

    /* ===== Radio Cards ===== */
    .radio-card {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.8);
      border: 2px solid rgba(0, 0, 0, 0.08);
      border-radius: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 0.5rem;
    }

    .radio-card:hover {
      border-color: rgba(94, 217, 166, 0.5);
    }

    .radio-card.selected {
      border-color: #5ED9A6;
      background: rgba(94, 217, 166, 0.08);
    }

    .radio-label {
      font-weight: 500;
      color: #2C3E50;
    }

    .radio-desc {
      font-size: 0.8125rem;
      color: #6B6B6B;
    }

    /* ===== Badges ===== */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.625rem;
      border-radius: 1rem;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .badge-success {
      background: rgba(94, 217, 166, 0.15);
      color: #059669;
    }

    .badge-podcast {
      background: rgba(139, 92, 246, 0.15);
      color: #7c3aed;
    }

    .badges-row {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    /* ===== Pipeline Visualization ===== */
    .pipeline-steps {
      background: rgba(0, 0, 0, 0.02);
      border-radius: 0.75rem;
      padding: 1.25rem;
      margin: 1.5rem 0;
    }

    .pipeline-steps-title {
      font-size: 0.75rem;
      font-weight: 600;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 1rem;
    }

    .pipeline-step {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 0;
    }

    .pipeline-step-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      flex-shrink: 0;
    }

    .pipeline-step-icon.done {
      background: #5ED9A6;
      color: #000;
    }

    .pipeline-step-icon.current {
      background: rgba(59, 130, 246, 0.15);
      color: #3b82f6;
    }

    .pipeline-step-icon.pending {
      background: rgba(0, 0, 0, 0.06);
      color: #999;
    }

    .pipeline-step-text {
      color: #3A3A3A;
      font-size: 0.9375rem;
    }

    .pipeline-step-text.muted {
      color: #999;
    }

    /* ===== Info Box ===== */
    .info-box {
      background: rgba(59, 130, 246, 0.08);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 0.75rem;
      padding: 1rem;
      margin: 1.5rem 0;
      font-size: 0.875rem;
      color: #1e40af;
    }

    /* ===== Fade Animation ===== */
    .fade-in {
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ===== Responsive ===== */
    @media (max-width: 640px) {
      body {
        padding: 1rem;
      }

      .modal {
        max-height: 100vh;
        border-radius: 1rem 1rem 0 0;
        margin-top: auto;
      }

      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }

      .demo-controls {
        top: auto;
        bottom: 1rem;
        right: 1rem;
        left: 1rem;
        max-width: none;
      }

      h1 {
        font-size: 1rem;
      }

      .subtitle {
        font-size: 0.8125rem;
      }
    }
  </style>
</head>
<body>
  <!-- Demo Controls -->
  <div class="demo-controls">
    <h4>Test-Modus</h4>
    <div class="step-info">
      Aktueller Step: <strong id="currentStep">entry</strong>
    </div>
    <button onclick="openModal()">Modal öffnen</button>
    <button onclick="closeModal()">Modal schließen</button>
    <button onclick="resetWizard()">Wizard Reset</button>
    <button onclick="jumpToStep('details')">Jump: Details Form</button>
    <button onclick="jumpToStep('confirmer')">Jump: Confirmer</button>
    <button onclick="jumpToStep('success')">Jump: Success</button>
  </div>

  <!-- Entry Point (simulates Dashboard button) -->
  <div class="demo-entry">
    <div class="demo-card">
      <h2>Dashboard Preview</h2>
      <p>So könnte der Button im User Dashboard aussehen:</p>
      <button class="btn btn-primary" onclick="openModal()">
        Use Case einreichen
      </button>
      <p class="hint-text">Für den KI Praxis Report Tirol 2026</p>
    </div>
  </div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modalOverlay" onclick="handleOverlayClick(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <!-- Modal Close Button -->
      <button class="modal-close" onclick="closeModal()" style="position: absolute; top: 1rem; right: 1rem; z-index: 10;">&times;</button>

      <!-- Modal Content -->
      <div class="modal-content" id="wizardContent">
        <!-- Content rendered by JS -->
      </div>
    </div>
  </div>

  <script>
    // ===== Tabler Icons (inline SVG) =====
    const icons = {
      check: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l5 5l10 -10"/></svg>',
      tool: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5"/></svg>',
      mountain: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20h18l-6.921 -14.612a2.3 2.3 0 0 0 -4.158 0l-6.921 14.612z"/><path d="M7.5 11l2 2.5l2.5 -2.5l2 3l2.5 -2"/></svg>',
      flag: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 5a5 5 0 0 1 7 0a5 5 0 0 0 7 0v9a5 5 0 0 1 -7 0a5 5 0 0 0 -7 0v-9z"/><path d="M5 21v-7"/></svg>',
      world: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"/><path d="M3.6 9h16.8"/><path d="M3.6 15h16.8"/><path d="M11.5 3a17 17 0 0 0 0 18"/><path d="M12.5 3a17 17 0 0 1 0 18"/></svg>',
      building: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M9 8l1 0"/><path d="M9 12l1 0"/><path d="M9 16l1 0"/><path d="M14 8l1 0"/><path d="M14 12l1 0"/><path d="M14 16l1 0"/><path d="M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16"/></svg>',
      users: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"/><path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/><path d="M21 21v-2a4 4 0 0 0 -3 -3.85"/></svg>',
      x: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/></svg>',
      speakerphone: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 8a3 3 0 0 1 0 6"/><path d="M10 8v11a1 1 0 0 1 -1 1h-1a1 1 0 0 1 -1 -1v-5"/><path d="M12 8h0l4.524 -3.77a.9 .9 0 0 1 1.476 .692v12.156a.9 .9 0 0 1 -1.476 .692l-4.524 -3.77h-8a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h8"/></svg>',
      userShield: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 21v-2a4 4 0 0 1 4 -4h2"/><path d="M22 16c0 4 -2.5 6 -3.5 6s-3.5 -2 -3.5 -6c1 0 2.5 -.5 3.5 -1.5c1 1 2.5 1.5 3.5 1.5z"/><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"/></svg>',
      chartBar: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M4 20h14"/></svg>',
      lock: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z"/><path d="M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"/><path d="M8 11v-4a4 4 0 1 1 8 0v4"/></svg>',
      rocket: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"/><path d="M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"/><path d="M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/></svg>',
      confetti: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h2"/><path d="M5 4v2"/><path d="M11.5 4l-.5 2"/><path d="M18 5h2"/><path d="M19 4v2"/><path d="M15 9l-1 1"/><path d="M18 13l2 -.5"/><path d="M18 19h2"/><path d="M19 18v2"/><path d="M14 16.518l-6.518 -6.518l-4.39 9.58a1 1 0 0 0 1.329 1.329l9.579 -4.39z"/></svg>',
      clock: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"/><path d="M12 7v5l3 3"/></svg>',
      microphone: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"/><path d="M5 10a7 7 0 0 0 14 0"/><path d="M8 21l8 0"/><path d="M12 17l0 4"/></svg>',
      eyeOff: '<svg class="icon" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.585 10.587a2 2 0 0 0 2.829 2.828"/><path d="M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"/><path d="M3 3l18 18"/></svg>'
    };

    // Large icon helper
    function iconLg(name) {
      return icons[name].replace('class="icon"', 'class="icon icon-lg"');
    }
    function iconXl(name) {
      return icons[name].replace('class="icon"', 'class="icon icon-xl"');
    }

    // ===== State Management =====
    const state = {
      step: 'intro',
      answers: {
        isProductive: null,
        region: null,
        tirolConnection: null,
        visibility: null
      },
      formData: {
        headline: '',
        problem: '',
        solution: '',
        result: '',
        toolsUsed: [],
        industry: '',
        industryCustom: '',
        companySize: '',
        confirmerName: '',
        confirmerRole: '',
        confirmerCompany: '',
        confirmerLinkedin: ''
      }
    };

    // Mock pipeline stats
    const pipelineStats = {
      submitted: 23,
      verified: 14,
      scheduled: 6,
      published: 3,
      goal: 50
    };

    // Options
    const tools = [
      'ChatGPT / GPT-4',
      'Claude',
      'Midjourney / DALL-E',
      'Microsoft Copilot',
      'Google Gemini',
      'Custom ML Model',
      'Open Source LLM',
      'Andere'
    ];

    const industries = [
      'IT & Software',
      'Handwerk & Produktion',
      'Tourismus & Gastro',
      'Handel & E-Commerce',
      'Beratung & Agentur',
      'Gesundheit & Medizin',
      'Bau & Architektur',
      'Andere'
    ];

    const companySizes = [
      { value: 'solo', label: 'Solo / EPU', desc: '1 Person' },
      { value: 'micro', label: 'Kleinstunternehmen', desc: '2-9 MA' },
      { value: 'small', label: 'Kleinunternehmen', desc: '10-49 MA' },
      { value: 'medium', label: 'Mittleres Unternehmen', desc: '50-249 MA' },
      { value: 'large', label: 'Großunternehmen', desc: '250+ MA' }
    ];

    // ===== Modal Controls =====
    function openModal() {
      document.getElementById('modalOverlay').classList.add('active');
      document.body.style.overflow = 'hidden';
      render();
    }

    function closeModal() {
      document.getElementById('modalOverlay').classList.remove('active');
      document.body.style.overflow = '';
    }

    function handleOverlayClick(event) {
      if (event.target === event.currentTarget) {
        closeModal();
      }
    }

    // ===== Navigation =====
    function setStep(newStep) {
      state.step = newStep;
      document.getElementById('currentStep').textContent = newStep;
      render();
    }

    function jumpToStep(step) {
      if (step === 'details' || step === 'confirmer' || step === 'success') {
        state.answers = {
          isProductive: true,
          region: 'tirol',
          tirolConnection: null,
          visibility: 'full'
        };
      }
      if (step === 'confirmer' || step === 'success') {
        state.formData = {
          ...state.formData,
          headline: 'KI-gestützte Angebotserstellung für Tischlerei',
          problem: 'Angebote dauerten 2 Stunden und waren fehleranfällig.',
          solution: 'Claude API mit Custom Templates und Preisdatenbank.',
          result: '15 Minuten statt 2 Stunden - 87% Zeitersparnis.',
          toolsUsed: ['Claude', 'Custom ML Model'],
          industry: 'Handwerk & Produktion',
          companySize: 'micro'
        };
      }
      if (step === 'success') {
        state.formData = {
          ...state.formData,
          confirmerName: 'Max Mustermann',
          confirmerRole: 'Geschäftsführer',
          confirmerCompany: 'Tischlerei Muster GmbH'
        };
      }
      setStep(step);
    }

    function resetWizard() {
      state.step = 'intro';
      state.answers = {
        isProductive: null,
        region: null,
        tirolConnection: null,
        visibility: null
      };
      state.formData = {
        headline: '',
        problem: '',
        solution: '',
        result: '',
        toolsUsed: [],
        industry: '',
        industryCustom: '',
        companySize: '',
        confirmerName: '',
        confirmerRole: '',
        confirmerCompany: '',
        confirmerLinkedin: ''
      };
      document.getElementById('currentStep').textContent = 'intro';
      render();
    }

    // ===== Form Helpers =====
    function setAnswer(key, value) {
      state.answers[key] = value;
    }

    function setFormData(key, value) {
      state.formData[key] = value;
      if (['headline', 'problem', 'solution', 'result'].includes(key)) {
        updateCharCount(key);
      }
    }

    function updateCharCount(field) {
      const el = document.getElementById(`${field}Count`);
      if (el) {
        const len = state.formData[field].length;
        const max = field === 'headline' ? 150 : 500;
        el.textContent = `${len}/${max}`;
        el.className = 'char-count';
        if (len > max * 0.9) el.className += ' warning';
        if (len > max) el.className += ' error';
      }
    }

    function toggleTool(tool) {
      const idx = state.formData.toolsUsed.indexOf(tool);
      if (idx > -1) {
        state.formData.toolsUsed.splice(idx, 1);
      } else {
        state.formData.toolsUsed.push(tool);
      }
      render();
    }

    function selectCompanySize(size) {
      state.formData.companySize = size;
      render();
    }

    // ===== Computed Flags =====
    function getFlags() {
      let priority = 'medium';
      let section = 'austria';
      let podcastEligible = true;

      if (state.answers.region === 'tirol') {
        priority = 'high';
        section = 'tirol';
      } else if (state.answers.region === 'austria') {
        priority = 'medium';
        section = 'austria';
      } else if (state.answers.tirolConnection === 'office') {
        priority = 'medium';
        section = 'tirol_connected';
      } else if (state.answers.tirolConnection === 'partner') {
        priority = 'low';
        section = 'network';
      }

      if (state.answers.visibility === 'anonymized' || state.answers.visibility === 'report_only') {
        podcastEligible = false;
      }

      return { priority, section, podcastEligible };
    }

    // ===== Validation =====
    function validateDetailsForm() {
      const { headline, problem, solution, result, toolsUsed, industry, industryCustom, companySize } = state.formData;
      const industryValid = industry && (industry !== 'Andere' || industryCustom);
      return headline && problem && solution && result && toolsUsed.length > 0 && industryValid && companySize;
    }

    function validateConfirmerForm() {
      const { confirmerName, confirmerRole, confirmerCompany } = state.formData;
      return confirmerName && confirmerRole && confirmerCompany;
    }

    // ===== Screen Renderers =====
    function renderIntro() {
      const progressPercent = (pipelineStats.verified / pipelineStats.goal) * 100;

      return `
        <div class="fade-in">
          <div style="margin-bottom: 1.25rem;">
            <h2 style="font-size: 1.125rem; font-weight: 600; color: #2C3E50; margin-bottom: 0.5rem;">KI Praxis Report Tirol 2026</h2>
            <p style="font-size: 0.875rem; color: #6B6B6B; line-height: 1.5;">
              Der erste unabhängige Report zu produktiven KI-Lösungen in Tirol.
              Verifiziert. Mit echten Zahlen. Von echten Unternehmen.
            </p>
          </div>

          <div class="pipeline-stats">
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-value">${pipelineStats.submitted}</div>
                <div class="stat-label">Eingereicht</div>
              </div>
              <div class="stat-item">
                <div class="stat-value highlight">${pipelineStats.verified}</div>
                <div class="stat-label">Verifiziert</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${pipelineStats.scheduled}</div>
                <div class="stat-label">Podcast</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${pipelineStats.published}</div>
                <div class="stat-label">Veröffentlicht</div>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${progressPercent}%"></div>
            </div>
            <div class="progress-text">Ziel: ${pipelineStats.goal} verifizierte Use Cases</div>
          </div>

          <div class="deadline-banner">
            ${icons.clock}
            <div class="deadline-text">
              <strong>Einreichschluss: 31. März 2026</strong>
              <span style="margin-left: 0.25rem;">· Report-Release April 2026</span>
            </div>
          </div>

          <button class="btn btn-primary" onclick="setStep('q1')">
            Meinen Use Case einreichen &rarr;
          </button>
          <p class="hint-text">Dauert ca. 5 Minuten. Nur produktive Cases.</p>
        </div>
      `;
    }

    function renderQ1() {
      return `
        <div class="fade-in">
          <div class="step-indicator">Schritt 1 von 3</div>
          <h1>Ist dein KI Use Case bereits produktiv im Einsatz?</h1>
          <p class="subtitle">Wir dokumentieren nur Live-Cases - keine Pilotprojekte oder Planungen.</p>

          <button class="option-card" onclick="setAnswer('isProductive', true); setStep('q2');">
            <div class="option-icon">${icons.check}</div>
            <div class="option-content">
              <div class="option-title">Ja, läuft produktiv</div>
              <div class="option-desc">Im echten Einsatz, nicht nur getestet</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('isProductive', false); setStep('exit_not_productive');">
            <div class="option-icon">${icons.tool}</div>
            <div class="option-content">
              <div class="option-title">Nein, noch in Entwicklung</div>
              <div class="option-desc">Pilot, Test oder Planung</div>
            </div>
          </button>
        </div>
      `;
    }

    function renderExitNotProductive() {
      return `
        <div class="fade-in exit-screen">
          <div class="exit-icon">${iconXl('rocket')}</div>
          <h2>Noch nicht produktiv? Kein Problem!</h2>
          <p>
            Wir dokumentieren nur Live-Cases. Sobald deine Lösung im echten Einsatz ist,
            freuen wir uns auf deine Einreichung.
          </p>
          <button class="btn btn-secondary" onclick="closeModal()">
            Verstanden
          </button>
        </div>
      `;
    }

    function renderQ2() {
      return `
        <div class="fade-in">
          <div class="step-indicator">Schritt 1 von 3</div>
          <h1>In welcher Region ist der Use Case im Einsatz?</h1>
          <p class="subtitle">Der Report fokussiert auf Tirol - aber auch österreichweite Cases sind willkommen.</p>

          <button class="option-card" onclick="setAnswer('region', 'tirol'); setStep('q3');">
            <div class="option-icon">${icons.mountain}</div>
            <div class="option-content">
              <div class="option-title">Tirol</div>
              <div class="option-desc">Innsbruck, Schwaz, Kufstein, etc.</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('region', 'austria'); setStep('q3');">
            <div class="option-icon">${icons.flag}</div>
            <div class="option-content">
              <div class="option-title">Österreich</div>
              <div class="option-desc">Außerhalb Tirols</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('region', 'international'); setStep('q2b');">
            <div class="option-icon">${icons.world}</div>
            <div class="option-content">
              <div class="option-title">DACH / International</div>
              <div class="option-desc">Deutschland, Schweiz oder weiter</div>
            </div>
          </button>

          <button class="btn btn-text" onclick="setStep('q1')">
            &larr; Zurück
          </button>
        </div>
      `;
    }

    function renderQ2b() {
      return `
        <div class="fade-in">
          <div class="step-indicator">Schritt 1 von 3</div>
          <h1>Hast du einen Bezug zu Tirol?</h1>
          <p class="subtitle">Der Report fokussiert auf die Region - aber Verbindungen zählen auch.</p>

          <button class="option-card" onclick="setAnswer('tirolConnection', 'office'); setStep('q3');">
            <div class="option-icon">${icons.building}</div>
            <div class="option-content">
              <div class="option-title">Ja, Firmensitz oder Niederlassung in Tirol</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('tirolConnection', 'partner'); setStep('q3');">
            <div class="option-icon">${icons.users}</div>
            <div class="option-content">
              <div class="option-title">Ja, Kunde oder Partner in Tirol</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('tirolConnection', 'none'); setStep('exit_no_connection');">
            <div class="option-icon">${icons.x}</div>
            <div class="option-content">
              <div class="option-title">Nein, kein direkter Bezug</div>
            </div>
          </button>

          <button class="btn btn-text" onclick="setStep('q2')">
            &larr; Zurück
          </button>
        </div>
      `;
    }

    function renderExitNoConnection() {
      return `
        <div class="fade-in exit-screen">
          <div class="exit-icon">${iconXl('world')}</div>
          <h2>Der Report fokussiert auf Tirol</h2>
          <p>
            Aber: Wir vernetzen gerne! Wenn du Kontakte in Tirol suchst
            oder einen Use Case hier umsetzen willst - schreib uns direkt.
          </p>
          <button class="btn btn-primary" onclick="window.location.href='mailto:thomas@kinn.at'">
            Kontakt aufnehmen
          </button>
          <button class="btn btn-text" onclick="closeModal()" style="margin-top: 0.5rem;">
            Schließen
          </button>
        </div>
      `;
    }

    function renderQ3() {
      return `
        <div class="fade-in">
          <div class="step-indicator">Schritt 1 von 3</div>
          <h1>Kannst du öffentlich über diesen Use Case sprechen?</h1>
          <p class="subtitle">Für den Podcast brauchen wir jemanden, der öffentlich spricht. Für den Report gibt's auch anonyme Optionen.</p>

          <button class="option-card" onclick="setAnswer('visibility', 'full'); setStep('details');">
            <div class="option-icon">${icons.speakerphone}</div>
            <div class="option-content">
              <div class="option-title">Ja, vollständig öffentlich</div>
              <div class="option-desc">Name, Firma, Details - alles OK</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('visibility', 'anonymized'); setStep('details');">
            <div class="option-icon">${icons.userShield}</div>
            <div class="option-content">
              <div class="option-title">Ja, aber ohne Kundennamen</div>
              <div class="option-desc">Mein Name OK, Kunde bleibt anonym</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('visibility', 'report_only'); setStep('details');">
            <div class="option-icon">${icons.chartBar}</div>
            <div class="option-content">
              <div class="option-title">Nur anonymisiert im Report</div>
              <div class="option-desc">Kein Podcast, aber Teil der Statistik</div>
            </div>
          </button>

          <button class="option-card" onclick="setAnswer('visibility', 'confidential'); setStep('exit_confidential');">
            <div class="option-icon">${icons.lock}</div>
            <div class="option-content">
              <div class="option-title">Nein, komplett vertraulich</div>
              <div class="option-desc">Kann nichts teilen</div>
            </div>
          </button>

          <button class="btn btn-text" onclick="setStep(state.answers.region === 'international' ? 'q2b' : 'q2')">
            &larr; Zurück
          </button>
        </div>
      `;
    }

    function renderExitConfidential() {
      return `
        <div class="fade-in exit-screen">
          <div class="exit-icon">${iconXl('eyeOff')}</div>
          <h2>Verstehen wir!</h2>
          <p>
            Manche Projekte müssen unter dem Radar bleiben.
            Falls sich das ändert oder du einen anderen Case hast, freuen wir uns!
          </p>
          <button class="btn btn-secondary" onclick="closeModal()">
            Verstanden
          </button>
        </div>
      `;
    }

    function renderDetails() {
      const flags = getFlags();
      const showCustomIndustry = state.formData.industry === 'Andere';

      return `
        <div class="fade-in">
          <div class="badges-row">
            <span class="badge badge-success">${icons.check} Filter bestanden</span>
            ${flags.podcastEligible ? `<span class="badge badge-podcast">${icons.microphone} Podcast-berechtigt</span>` : ''}
          </div>
          <div class="step-indicator">Schritt 2 von 3 - Use Case Details</div>
          <h1>Erzähl uns von deinem KI Use Case</h1>

          <div class="form-group">
            <label class="form-label">Use Case in einem Satz <span class="required">*</span></label>
            <input
              type="text"
              class="form-input"
              placeholder="z.B. KI-gestützte Angebotserstellung für Tischlerei - von 2h auf 15min"
              maxlength="150"
              value="${state.formData.headline}"
              oninput="setFormData('headline', this.value)"
            >
            <div class="char-count" id="headlineCount">${state.formData.headline.length}/150</div>
          </div>

          <div class="form-group">
            <label class="form-label">Welches Problem löst der Use Case? <span class="required">*</span></label>
            <textarea
              class="form-textarea"
              placeholder="Was war vorher der Schmerz? Warum war das ein Thema?"
              oninput="setFormData('problem', this.value)"
            >${state.formData.problem}</textarea>
            <div class="char-count" id="problemCount">${state.formData.problem.length}/500</div>
          </div>

          <div class="form-group">
            <label class="form-label">Wie funktioniert die Lösung? <span class="required">*</span></label>
            <textarea
              class="form-textarea"
              placeholder="Erklär's wie einem Freund - keine technischen Details nötig"
              oninput="setFormData('solution', this.value)"
            >${state.formData.solution}</textarea>
            <div class="char-count" id="solutionCount">${state.formData.solution.length}/500</div>
          </div>

          <div class="form-group">
            <label class="form-label">Was hat sich messbar verändert? <span class="required">*</span></label>
            <textarea
              class="form-textarea"
              placeholder="z.B. Zeitersparnis, Kostenreduktion, Qualitätsverbesserung - gerne mit Zahlen!"
              oninput="setFormData('result', this.value)"
            >${state.formData.result}</textarea>
            <div class="char-count" id="resultCount">${state.formData.result.length}/500</div>
          </div>

          <div class="form-group">
            <label class="form-label">Welche KI-Tools kommen zum Einsatz? <span class="required">*</span></label>
            <div class="chip-container">
              ${tools.map(tool => `
                <span
                  class="chip ${state.formData.toolsUsed.includes(tool) ? 'selected' : ''}"
                  onclick="toggleTool('${tool}')"
                >${tool}</span>
              `).join('')}
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Branche <span class="required">*</span></label>
            <select
              class="form-select"
              onchange="setFormData('industry', this.value); render();"
            >
              <option value="">Auswählen...</option>
              ${industries.map(ind => `
                <option value="${ind}" ${state.formData.industry === ind ? 'selected' : ''}>${ind}</option>
              `).join('')}
            </select>
            ${showCustomIndustry ? `
              <input
                type="text"
                class="form-input"
                style="margin-top: 0.5rem;"
                placeholder="Welche Branche?"
                value="${state.formData.industryCustom}"
                oninput="setFormData('industryCustom', this.value)"
              >
            ` : ''}
          </div>

          <div class="form-group">
            <label class="form-label">Unternehmensgröße <span class="required">*</span></label>
            ${companySizes.map(size => `
              <div
                class="radio-card ${state.formData.companySize === size.value ? 'selected' : ''}"
                onclick="selectCompanySize('${size.value}')"
              >
                <span class="radio-label">${size.label}</span>
                <span class="radio-desc">${size.desc}</span>
              </div>
            `).join('')}
          </div>

          <div class="btn-row">
            <button class="btn btn-text" onclick="setStep('q3')">
              &larr; Zurück
            </button>
            <button
              class="btn btn-primary"
              onclick="if(validateDetailsForm()) setStep('confirmer'); else alert('Bitte fülle alle Pflichtfelder aus.');"
            >
              Weiter &rarr;
            </button>
          </div>
        </div>
      `;
    }

    function renderConfirmer() {
      // Referenz optional bei: anonymized ODER report_only
      const isOptional = ['anonymized', 'report_only'].includes(state.answers.visibility);
      const requiredMark = isOptional ? '' : '<span class="required">*</span>';

      return `
        <div class="fade-in">
          <div class="step-indicator">Schritt 3 von 3 - Verifizierung</div>
          <h1>Wer kann diesen Use Case bestätigen?</h1>
          ${isOptional
            ? `<p class="subtitle">Da du anonym bleibst, ist eine Referenz optional - hilft uns aber bei der Verifizierung.</p>
               <div style="background: rgba(94,217,166,0.08); border-radius: 0.5rem; padding: 0.75rem 1rem; margin-bottom: 1.25rem; font-size: 0.8125rem; color: #3A3A3A; display: flex; align-items: flex-start; gap: 0.5rem;">
                 <span style="flex-shrink: 0; margin-top: 2px;">${icons.eyeOff}</span>
                 <span><strong>Deine Anonymität bleibt gewahrt.</strong> Die Referenz wird nur intern zur Verifizierung genutzt.</span>
               </div>`
            : `<p class="subtitle">Das muss nicht der Kunde sein - kann auch ein Projektpartner oder Kollege sein.</p>`
          }

          <div class="form-group">
            <label class="form-label">Name ${requiredMark}</label>
            <input
              type="text"
              class="form-input"
              placeholder="Max Mustermann"
              value="${state.formData.confirmerName}"
              oninput="setFormData('confirmerName', this.value)"
            >
          </div>

          <div class="form-group">
            <label class="form-label">Rolle / Position ${requiredMark}</label>
            <input
              type="text"
              class="form-input"
              placeholder="z.B. Geschäftsführer, Projektleiter, CTO"
              value="${state.formData.confirmerRole}"
              oninput="setFormData('confirmerRole', this.value)"
            >
          </div>

          <div class="form-group">
            <label class="form-label">Unternehmen ${requiredMark}</label>
            <input
              type="text"
              class="form-input"
              placeholder="Firmenname"
              value="${state.formData.confirmerCompany}"
              oninput="setFormData('confirmerCompany', this.value)"
            >
          </div>

          <div class="form-group">
            <label class="form-label">LinkedIn (optional)</label>
            <input
              type="url"
              class="form-input"
              placeholder="https://linkedin.com/in/..."
              value="${state.formData.confirmerLinkedin}"
              oninput="setFormData('confirmerLinkedin', this.value)"
            >
          </div>

          <div class="btn-row ${isOptional ? 'btn-row-stack' : ''}">
            ${isOptional
              ? `<button class="btn btn-primary" onclick="submitUseCase(); setStep('success');">
                   ${state.formData.confirmerName ? 'Mit Referenz einreichen' : 'Einreichen'}
                 </button>
                 <button class="btn btn-text" onclick="setStep('details')">
                   &larr; Zurück
                 </button>`
              : `<button class="btn btn-text" onclick="setStep('details')">
                   &larr; Zurück
                 </button>
                 <button
                   class="btn btn-primary"
                   onclick="if(validateConfirmerForm()) { submitUseCase(); setStep('success'); } else alert('Bitte fülle alle Pflichtfelder aus.');"
                 >
                   Einreichen
                 </button>`
            }
          </div>
        </div>
      `;
    }

    function renderSuccess() {
      const flags = getFlags();

      return `
        <div class="fade-in" style="text-align: center;">
          <div class="exit-icon" style="color: #5ED9A6;">${iconXl('confetti')}</div>
          <h1>Danke! Dein Use Case ist eingereicht</h1>

          <div class="pipeline-steps">
            <div class="pipeline-steps-title">Dein Use Case in der Pipeline</div>

            <div class="pipeline-step">
              <div class="pipeline-step-icon done">${icons.check}</div>
              <span class="pipeline-step-text">Eingereicht</span>
            </div>

            <div class="pipeline-step">
              <div class="pipeline-step-icon current">${icons.clock}</div>
              <span class="pipeline-step-text">Review durch KINN Team (1-2 Wochen)</span>
            </div>

            <div class="pipeline-step">
              <div class="pipeline-step-icon pending">○</div>
              <span class="pipeline-step-text muted">Verifizierung (Kurzer Check-Call)</span>
            </div>

            ${flags.podcastEligible ? `
            <div class="pipeline-step">
              <div class="pipeline-step-icon pending">○</div>
              <span class="pipeline-step-text muted">Podcast-Termin</span>
            </div>
            ` : ''}
          </div>

          <p style="color: #6B6B6B; margin-bottom: 1.5rem;">
            Wir schauen uns deinen Case an und melden uns innerhalb von 1-2 Wochen.
            Bei Fragen kontaktieren wir dich vorab.
          </p>

          <div class="info-box">
            Aktuell sind <strong>${pipelineStats.submitted + 1}</strong> Use Cases in der Pipeline,
            davon <strong>${pipelineStats.verified}</strong> verifiziert und
            <strong>${pipelineStats.published}</strong> bereits veröffentlicht.
          </div>

          <button class="btn btn-primary" onclick="closeModal(); resetWizard();">
            Fertig
          </button>

          <button class="btn btn-text" style="margin-top: 0.5rem;" onclick="resetWizard();">
            Weiteren Use Case einreichen
          </button>
        </div>
      `;
    }

    // ===== Submit (Mock) =====
    function submitUseCase() {
      // In production: POST to /api/raus/submit
      console.log('Submitting Use Case:', {
        answers: state.answers,
        formData: state.formData,
        flags: getFlags()
      });
    }

    // ===== Main Render =====
    function render() {
      const content = document.getElementById('wizardContent');
      if (!content) return;

      const renderers = {
        intro: renderIntro,
        q1: renderQ1,
        exit_not_productive: renderExitNotProductive,
        q2: renderQ2,
        q2b: renderQ2b,
        exit_no_connection: renderExitNoConnection,
        q3: renderQ3,
        exit_confidential: renderExitConfidential,
        details: renderDetails,
        confirmer: renderConfirmer,
        success: renderSuccess
      };

      const renderer = renderers[state.step] || renderIntro;
      content.innerHTML = renderer();
    }

    // ===== Keyboard Support =====
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
      }
    });

    // Initial render
    render();
  </script>
</body>
</html>
